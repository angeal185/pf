//hyperscript
var Text=window.Text,cleanupFuncs=[];function h(){var e=[].slice.call(arguments),t=null;function n(e){var r,s;if(null==e);else if("string"==typeof e)t?t.appendChild(r=document.createTextNode(e)):(s=e.split(/([\.#]?[^\s#.]+)/),/^\.|#/.test(s[1])&&(t=document.createElement("div")),forEach(s,function(e){var n=e.substring(1,e.length);e&&(t?"."===e[0]?t.classList.add(n):"#"===e[0]&&t.setAttribute("id",n):t=document.createElement(e))}));else if("number"==typeof e||"boolean"==typeof e||e instanceof Date||e instanceof RegExp)t.appendChild(r=document.createTextNode(e.toString()));else if(isArray(e))forEach(e,n);else if(isNode(e))t.appendChild(r=e);else if(e instanceof Text)t.appendChild(r=e);else if("object"==typeof e)for(var i in e)if("function"==typeof e[i])/^on\w+/.test(i)?function(e,n){t.addEventListener?(t.addEventListener(e.substring(2),n[e],!1),cleanupFuncs.push(function(){t.removeEventListener(e.substring(2),n[e],!1)})):(t.attachEvent(e,n[e]),cleanupFuncs.push(function(){t.detachEvent(e,n[e])}))}(i,e):(t[i]=e[i](),cleanupFuncs.push(e[i](function(e){t[i]=e})));else if("style"===i)if("string"==typeof e[i])t.style.cssText=e[i];else for(var o in e[i])!function(n,r){if("function"==typeof r)t.style.setProperty(n,r()),cleanupFuncs.push(r(function(e){t.style.setProperty(n,e)}));else var s=e[i][n].match(/(.*)\W+!important\W*$/);s?t.style.setProperty(n,s[1],"important"):t.style.setProperty(n,e[i][n])}(o,e[i][o]);else if("attrs"===i)for(var c in e[i])t.setAttribute(c,e[i][c]);else"data-"===i.substr(0,5)?t.setAttribute(i,e[i]):t[i]=e[i];else if("function"==typeof e){c=e();t.appendChild(r=isNode(c)?c:document.createTextNode(c)),cleanupFuncs.push(e(function(e){isNode(e)&&r.parentElement?(r.parentElement.replaceChild(e,r),r=e):r.textContent=e}))}return r}for(;e.length;)n(e.shift());return t}function isNode(e){return e&&e.nodeName&&e.nodeType}function forEach(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n)}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}h.cleanup=function(){for(var e=0;e<cleanupFuncs.length;e++)cleanupFuncs[e]();cleanupFuncs.length=0};
